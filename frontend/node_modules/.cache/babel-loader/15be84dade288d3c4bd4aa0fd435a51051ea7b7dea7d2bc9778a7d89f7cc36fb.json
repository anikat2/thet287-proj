{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anika\\\\Desktop\\\\school\\\\freshman year\\\\thet287-proj\\\\src\\\\frontend\\\\Paint.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState, useCallback } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ROUND_DURATION = 180; // 3 minutes in seconds\nconst WS_URL = \"ws://localhost:8000/ws\";\nfunction Timer({\n  seconds,\n  label\n}) {\n  const mins = String(Math.floor(seconds / 60)).padStart(2, \"0\");\n  const secs = String(seconds % 60).padStart(2, \"0\");\n  const urgent = seconds <= 30;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontFamily: \"'Courier New', monospace\",\n      fontSize: \"2.5rem\",\n      fontWeight: \"bold\",\n      color: urgent ? \"#ff4444\" : \"#f0e6d3\",\n      textShadow: urgent ? \"0 0 20px #ff444488\" : \"none\",\n      letterSpacing: \"0.1em\",\n      transition: \"color 0.3s\"\n    },\n    children: [label, \" \", mins, \":\", secs]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 9\n  }, this);\n}\n_c = Timer;\nexport default function Paint({\n  code,\n  playerId\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const wsRef = useRef(null);\n  const drawingRef = useRef(false);\n  const lastPosRef = useRef({\n    x: 0,\n    y: 0\n  });\n  const ctxRef = useRef(null);\n  const [side, setSide] = useState(null); // \"left\" | \"right\"\n  const [round, setRound] = useState(1);\n  const [prompt, setPrompt] = useState(\"\");\n  const [timeLeft, setTimeLeft] = useState(ROUND_DURATION);\n  const [phase, setPhase] = useState(\"waiting\"); // waiting | playing | transition | gameover\n  const [playerIndex, setPlayerIndex] = useState(null);\n  const [color, setColor] = useState(\"#1a1a2e\");\n  const [brushSize, setBrushSize] = useState(4);\n  const [tool, setTool] = useState(\"pen\"); // pen | eraser\n  const timerRef = useRef(null);\n  const roundRef = useRef(1);\n  const sideRef = useRef(null);\n  const CANVAS_WIDTH = 900;\n  const CANVAS_HEIGHT = 500;\n  const HALF = CANVAS_WIDTH / 2;\n\n  // Restrict x to allowed half\n  const clampX = useCallback((x, currentSide) => {\n    if (currentSide === \"left\") return Math.min(x, HALF);\n    if (currentSide === \"right\") return Math.max(x, HALF);\n    return x;\n  }, [HALF]);\n  const getCanvasPos = e => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = CANVAS_WIDTH / rect.width;\n    const scaleY = CANVAS_HEIGHT / rect.height;\n    return {\n      x: (e.clientX - rect.left) * scaleX,\n      y: (e.clientY - rect.top) * scaleY\n    };\n  };\n  const drawStroke = useCallback((ctx, x0, y0, x1, y1, strokeColor, size, eraser) => {\n    ctx.save();\n    ctx.beginPath();\n    ctx.moveTo(x0, y0);\n    ctx.lineTo(x1, y1);\n    ctx.strokeStyle = eraser ? \"#f5f0e8\" : strokeColor;\n    ctx.lineWidth = eraser ? size * 3 : size;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.stroke();\n    ctx.restore();\n  }, []);\n  const replayStrokes = useCallback((strokes, ctx) => {\n    strokes.forEach(s => {\n      if (s.type === \"stroke\") {\n        drawStroke(ctx, s.x0, s.y0, s.x1, s.y1, s.color, s.size, s.eraser);\n      }\n    });\n  }, [drawStroke]);\n\n  // Start countdown timer\n  const startTimer = useCallback(() => {\n    if (timerRef.current) clearInterval(timerRef.current);\n    setTimeLeft(ROUND_DURATION);\n    let t = ROUND_DURATION;\n    timerRef.current = setInterval(() => {\n      t -= 1;\n      setTimeLeft(t);\n      if (t <= 0) {\n        clearInterval(timerRef.current);\n        // Signal round done\n        if (roundRef.current === 1) {\n          var _wsRef$current;\n          (_wsRef$current = wsRef.current) === null || _wsRef$current === void 0 ? void 0 : _wsRef$current.send(JSON.stringify({\n            type: \"round1_done\"\n          }));\n          setPhase(\"transition\");\n        } else {\n          var _wsRef$current2;\n          (_wsRef$current2 = wsRef.current) === null || _wsRef$current2 === void 0 ? void 0 : _wsRef$current2.send(JSON.stringify({\n            type: \"game_over\"\n          }));\n          setPhase(\"gameover\");\n        }\n      }\n    }, 1000);\n  }, []);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    ctxRef.current = ctx;\n    ctx.fillStyle = \"#f5f0e8\";\n    ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n\n    // Draw divider line\n    ctx.strokeStyle = \"#ccc\";\n    ctx.lineWidth = 2;\n    ctx.setLineDash([8, 6]);\n    ctx.beginPath();\n    ctx.moveTo(HALF, 0);\n    ctx.lineTo(HALF, CANVAS_HEIGHT);\n    ctx.stroke();\n    ctx.setLineDash([]);\n  }, [HALF]);\n  useEffect(() => {\n    if (!code || !playerId) return;\n    const ws = new WebSocket(`${WS_URL}/${code}/${playerId}`);\n    wsRef.current = ws;\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      const ctx = ctxRef.current;\n      if (data.type === \"init\") {\n        setSide(data.side);\n        sideRef.current = data.side;\n        setPrompt(data.prompt);\n        setRound(data.round);\n        roundRef.current = data.round;\n        setPlayerIndex(data.player_index);\n      }\n      if (data.type === \"game_start\") {\n        setPhase(\"playing\");\n        startTimer();\n      }\n      if (data.type === \"partner_stroke\") {\n        const s = data.stroke;\n        drawStroke(ctx, s.x0, s.y0, s.x1, s.y1, s.color, s.size, s.eraser);\n      }\n      if (data.type === \"round2_start\") {\n        roundRef.current = 2;\n        setRound(2);\n        setSide(data.your_new_side);\n        sideRef.current = data.your_new_side;\n\n        // Replay partner's strokes from round 1\n        replayStrokes(data.partner_strokes, ctx);\n\n        // Redraw divider\n        ctx.strokeStyle = \"#ccc\";\n        ctx.lineWidth = 2;\n        ctx.setLineDash([8, 6]);\n        ctx.beginPath();\n        ctx.moveTo(HALF, 0);\n        ctx.lineTo(HALF, CANVAS_HEIGHT);\n        ctx.stroke();\n        ctx.setLineDash([]);\n        setPhase(\"playing\");\n        startTimer();\n      }\n      if (data.type === \"game_over\") {\n        setPhase(\"gameover\");\n        if (timerRef.current) clearInterval(timerRef.current);\n      }\n    };\n    ws.onclose = () => console.log(\"WebSocket closed\");\n    return () => {\n      ws.close();\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [code, playerId, drawStroke, replayStrokes, startTimer, HALF]);\n  const onMouseDown = e => {\n    if (phase !== \"playing\") return;\n    drawingRef.current = true;\n    const pos = getCanvasPos(e);\n    lastPosRef.current = {\n      x: clampX(pos.x, sideRef.current),\n      y: pos.y\n    };\n  };\n  const onMouseMove = e => {\n    var _wsRef$current3;\n    if (!drawingRef.current || phase !== \"playing\") return;\n    const ctx = ctxRef.current;\n    const pos = getCanvasPos(e);\n    const x1 = clampX(pos.x, sideRef.current);\n    const y1 = pos.y;\n    const {\n      x: x0,\n      y: y0\n    } = lastPosRef.current;\n    drawStroke(ctx, x0, y0, x1, y1, color, brushSize, tool === \"eraser\");\n    const strokeData = {\n      type: \"stroke\",\n      x0,\n      y0,\n      x1,\n      y1,\n      color,\n      size: brushSize,\n      eraser: tool === \"eraser\"\n    };\n    (_wsRef$current3 = wsRef.current) === null || _wsRef$current3 === void 0 ? void 0 : _wsRef$current3.send(JSON.stringify(strokeData));\n    lastPosRef.current = {\n      x: x1,\n      y: y1\n    };\n  };\n  const onMouseUp = () => {\n    drawingRef.current = false;\n  };\n  const colors = [\"#1a1a2e\", \"#e63946\", \"#457b9d\", \"#2d6a4f\", \"#f4a261\", \"#9b2226\", \"#6d6875\", \"#ffffff\"];\n  const sideLabel = side === \"left\" ? \"‚óÄ LEFT HALF\" : \"‚ñ∂ RIGHT HALF\";\n  const roundLabel = round === 1 ? \"ROUND 1 ‚Äî Draw your half\" : \"ROUND 2 ‚Äî Complete your partner's canvas\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: \"100vh\",\n      background: \"linear-gradient(135deg, #0f0c29, #302b63, #24243e)\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      padding: \"20px\",\n      fontFamily: \"'Courier New', monospace\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        width: \"100%\",\n        maxWidth: CANVAS_WIDTH,\n        marginBottom: \"12px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"#a89bc2\",\n          fontSize: \"0.9rem\",\n          letterSpacing: \"0.15em\"\n        },\n        children: phase === \"waiting\" ? \"‚è≥ WAITING FOR PLAYER 2...\" : sideLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"#f0e6d3\",\n          fontSize: \"1rem\",\n          letterSpacing: \"0.1em\",\n          textAlign: \"center\"\n        },\n        children: [\"\\uD83C\\uDFA8 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: prompt || \"...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"#a89bc2\",\n          fontSize: \"0.9rem\",\n          letterSpacing: \"0.15em\"\n        },\n        children: phase === \"playing\" ? roundLabel.split(\"‚Äî\")[0] : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this), phase === \"playing\" && /*#__PURE__*/_jsxDEV(Timer, {\n      seconds: timeLeft,\n      label: `ROUND ${round}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }, this), phase === \"transition\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"#f0e6d3\",\n        fontSize: \"1.5rem\",\n        marginBottom: \"12px\",\n        letterSpacing: \"0.1em\"\n      },\n      children: \"\\u23F3 Waiting for round 2...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 17\n    }, this), phase === \"gameover\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"#f4a261\",\n        fontSize: \"2rem\",\n        marginBottom: \"12px\",\n        letterSpacing: \"0.1em\"\n      },\n      children: \"\\uD83C\\uDF89 GAME OVER \\u2014 Here's the final canvas!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 17\n    }, this), phase === \"playing\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"#a89bc2\",\n        fontSize: \"0.8rem\",\n        letterSpacing: \"0.2em\",\n        marginBottom: \"8px\"\n      },\n      children: roundLabel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"relative\",\n        boxShadow: \"0 0 60px #00000088\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: CANVAS_WIDTH,\n        height: CANVAS_HEIGHT,\n        style: {\n          display: \"block\",\n          maxWidth: \"100%\",\n          cursor: phase === \"playing\" ? tool === \"eraser\" ? \"cell\" : \"crosshair\" : \"default\",\n          borderRadius: \"4px\",\n          border: \"2px solid #302b63\"\n        },\n        onMouseDown: onMouseDown,\n        onMouseMove: onMouseMove,\n        onMouseUp: onMouseUp,\n        onMouseLeave: onMouseUp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), phase === \"playing\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: 8,\n          left: side === \"left\" ? 8 : HALF + 8,\n          background: \"#302b6388\",\n          color: \"#f0e6d3\",\n          padding: \"4px 10px\",\n          borderRadius: \"4px\",\n          fontSize: \"0.75rem\",\n          letterSpacing: \"0.1em\",\n          pointerEvents: \"none\"\n        },\n        children: \"YOUR ZONE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }, this), phase === \"playing\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: \"12px\",\n        alignItems: \"center\",\n        marginTop: \"16px\",\n        background: \"#1a1a3e\",\n        padding: \"12px 20px\",\n        borderRadius: \"50px\",\n        boxShadow: \"0 4px 20px #00000066\"\n      },\n      children: [colors.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => {\n          setColor(c);\n          setTool(\"pen\");\n        },\n        style: {\n          width: 28,\n          height: 28,\n          borderRadius: \"50%\",\n          background: c,\n          cursor: \"pointer\",\n          border: color === c && tool === \"pen\" ? \"3px solid #f0e6d3\" : \"3px solid transparent\",\n          boxShadow: c === \"#ffffff\" ? \"0 0 0 1px #666 inset\" : \"none\",\n          transition: \"transform 0.1s\",\n          transform: color === c && tool === \"pen\" ? \"scale(1.2)\" : \"scale(1)\"\n        }\n      }, c, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 1,\n          height: 28,\n          background: \"#ffffff22\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTool(tool === \"eraser\" ? \"pen\" : \"eraser\"),\n        style: {\n          background: tool === \"eraser\" ? \"#f0e6d3\" : \"transparent\",\n          color: tool === \"eraser\" ? \"#1a1a2e\" : \"#f0e6d3\",\n          border: \"2px solid #f0e6d344\",\n          borderRadius: \"20px\",\n          padding: \"4px 14px\",\n          cursor: \"pointer\",\n          fontFamily: \"inherit\",\n          fontSize: \"0.8rem\",\n          letterSpacing: \"0.1em\"\n        },\n        children: \"ERASER\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"range\",\n        min: 2,\n        max: 24,\n        value: brushSize,\n        onChange: e => setBrushSize(Number(e.target.value)),\n        style: {\n          width: 80,\n          accentColor: \"#a89bc2\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 9\n  }, this);\n}\n_s(Paint, \"sZuRXi/ROelI0fACavzjWsFjFrA=\");\n_c2 = Paint;\nvar _c, _c2;\n$RefreshReg$(_c, \"Timer\");\n$RefreshReg$(_c2, \"Paint\");","map":{"version":3,"names":["useEffect","useRef","useState","useCallback","jsxDEV","_jsxDEV","ROUND_DURATION","WS_URL","Timer","seconds","label","mins","String","Math","floor","padStart","secs","urgent","style","fontFamily","fontSize","fontWeight","color","textShadow","letterSpacing","transition","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","Paint","code","playerId","_s","canvasRef","wsRef","drawingRef","lastPosRef","x","y","ctxRef","side","setSide","round","setRound","prompt","setPrompt","timeLeft","setTimeLeft","phase","setPhase","playerIndex","setPlayerIndex","setColor","brushSize","setBrushSize","tool","setTool","timerRef","roundRef","sideRef","CANVAS_WIDTH","CANVAS_HEIGHT","HALF","clampX","currentSide","min","max","getCanvasPos","e","canvas","current","rect","getBoundingClientRect","scaleX","width","scaleY","height","clientX","left","clientY","top","drawStroke","ctx","x0","y0","x1","y1","strokeColor","size","eraser","save","beginPath","moveTo","lineTo","strokeStyle","lineWidth","lineCap","lineJoin","stroke","restore","replayStrokes","strokes","forEach","s","type","startTimer","clearInterval","t","setInterval","_wsRef$current","send","JSON","stringify","_wsRef$current2","getContext","fillStyle","fillRect","setLineDash","ws","WebSocket","onmessage","event","data","parse","player_index","your_new_side","partner_strokes","onclose","console","log","close","onMouseDown","pos","onMouseMove","_wsRef$current3","strokeData","onMouseUp","colors","sideLabel","roundLabel","minHeight","background","display","flexDirection","alignItems","justifyContent","padding","maxWidth","marginBottom","textAlign","split","position","boxShadow","ref","cursor","borderRadius","border","onMouseLeave","pointerEvents","gap","marginTop","map","c","onClick","transform","value","onChange","Number","target","accentColor","_c2","$RefreshReg$"],"sources":["C:/Users/anika/Desktop/school/freshman year/thet287-proj/src/frontend/Paint.js"],"sourcesContent":["import { useEffect, useRef, useState, useCallback } from \"react\";\r\n\r\nconst ROUND_DURATION = 180; // 3 minutes in seconds\r\nconst WS_URL = \"ws://localhost:8000/ws\";\r\n\r\nfunction Timer({ seconds, label }) {\r\n    const mins = String(Math.floor(seconds / 60)).padStart(2, \"0\");\r\n    const secs = String(seconds % 60).padStart(2, \"0\");\r\n    const urgent = seconds <= 30;\r\n    return (\r\n        <div style={{\r\n            fontFamily: \"'Courier New', monospace\",\r\n            fontSize: \"2.5rem\",\r\n            fontWeight: \"bold\",\r\n            color: urgent ? \"#ff4444\" : \"#f0e6d3\",\r\n            textShadow: urgent ? \"0 0 20px #ff444488\" : \"none\",\r\n            letterSpacing: \"0.1em\",\r\n            transition: \"color 0.3s\",\r\n        }}>\r\n            {label} {mins}:{secs}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function Paint({ code, playerId }) {\r\n    const canvasRef = useRef(null);\r\n    const wsRef = useRef(null);\r\n    const drawingRef = useRef(false);\r\n    const lastPosRef = useRef({ x: 0, y: 0 });\r\n    const ctxRef = useRef(null);\r\n\r\n    const [side, setSide] = useState(null);          // \"left\" | \"right\"\r\n    const [round, setRound] = useState(1);\r\n    const [prompt, setPrompt] = useState(\"\");\r\n    const [timeLeft, setTimeLeft] = useState(ROUND_DURATION);\r\n    const [phase, setPhase] = useState(\"waiting\");   // waiting | playing | transition | gameover\r\n    const [playerIndex, setPlayerIndex] = useState(null);\r\n    const [color, setColor] = useState(\"#1a1a2e\");\r\n    const [brushSize, setBrushSize] = useState(4);\r\n    const [tool, setTool] = useState(\"pen\");         // pen | eraser\r\n    const timerRef = useRef(null);\r\n    const roundRef = useRef(1);\r\n    const sideRef = useRef(null);\r\n\r\n    const CANVAS_WIDTH = 900;\r\n    const CANVAS_HEIGHT = 500;\r\n    const HALF = CANVAS_WIDTH / 2;\r\n\r\n    // Restrict x to allowed half\r\n    const clampX = useCallback((x, currentSide) => {\r\n        if (currentSide === \"left\") return Math.min(x, HALF);\r\n        if (currentSide === \"right\") return Math.max(x, HALF);\r\n        return x;\r\n    }, [HALF]);\r\n\r\n    const getCanvasPos = (e) => {\r\n        const canvas = canvasRef.current;\r\n        const rect = canvas.getBoundingClientRect();\r\n        const scaleX = CANVAS_WIDTH / rect.width;\r\n        const scaleY = CANVAS_HEIGHT / rect.height;\r\n        return {\r\n            x: (e.clientX - rect.left) * scaleX,\r\n            y: (e.clientY - rect.top) * scaleY,\r\n        };\r\n    };\r\n\r\n    const drawStroke = useCallback((ctx, x0, y0, x1, y1, strokeColor, size, eraser) => {\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.moveTo(x0, y0);\r\n        ctx.lineTo(x1, y1);\r\n        ctx.strokeStyle = eraser ? \"#f5f0e8\" : strokeColor;\r\n        ctx.lineWidth = eraser ? size * 3 : size;\r\n        ctx.lineCap = \"round\";\r\n        ctx.lineJoin = \"round\";\r\n        ctx.stroke();\r\n        ctx.restore();\r\n    }, []);\r\n\r\n    const replayStrokes = useCallback((strokes, ctx) => {\r\n        strokes.forEach((s) => {\r\n            if (s.type === \"stroke\") {\r\n                drawStroke(ctx, s.x0, s.y0, s.x1, s.y1, s.color, s.size, s.eraser);\r\n            }\r\n        });\r\n    }, [drawStroke]);\r\n\r\n    // Start countdown timer\r\n    const startTimer = useCallback(() => {\r\n        if (timerRef.current) clearInterval(timerRef.current);\r\n        setTimeLeft(ROUND_DURATION);\r\n        let t = ROUND_DURATION;\r\n        timerRef.current = setInterval(() => {\r\n            t -= 1;\r\n            setTimeLeft(t);\r\n            if (t <= 0) {\r\n                clearInterval(timerRef.current);\r\n                // Signal round done\r\n                if (roundRef.current === 1) {\r\n                    wsRef.current?.send(JSON.stringify({ type: \"round1_done\" }));\r\n                    setPhase(\"transition\");\r\n                } else {\r\n                    wsRef.current?.send(JSON.stringify({ type: \"game_over\" }));\r\n                    setPhase(\"gameover\");\r\n                }\r\n            }\r\n        }, 1000);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext(\"2d\");\r\n        ctxRef.current = ctx;\r\n        ctx.fillStyle = \"#f5f0e8\";\r\n        ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\r\n        // Draw divider line\r\n        ctx.strokeStyle = \"#ccc\";\r\n        ctx.lineWidth = 2;\r\n        ctx.setLineDash([8, 6]);\r\n        ctx.beginPath();\r\n        ctx.moveTo(HALF, 0);\r\n        ctx.lineTo(HALF, CANVAS_HEIGHT);\r\n        ctx.stroke();\r\n        ctx.setLineDash([]);\r\n    }, [HALF]);\r\n\r\n    useEffect(() => {\r\n        if (!code || !playerId) return;\r\n\r\n        const ws = new WebSocket(`${WS_URL}/${code}/${playerId}`);\r\n        wsRef.current = ws;\r\n\r\n        ws.onmessage = (event) => {\r\n            const data = JSON.parse(event.data);\r\n            const ctx = ctxRef.current;\r\n\r\n            if (data.type === \"init\") {\r\n                setSide(data.side);\r\n                sideRef.current = data.side;\r\n                setPrompt(data.prompt);\r\n                setRound(data.round);\r\n                roundRef.current = data.round;\r\n                setPlayerIndex(data.player_index);\r\n            }\r\n\r\n            if (data.type === \"game_start\") {\r\n                setPhase(\"playing\");\r\n                startTimer();\r\n            }\r\n\r\n            if (data.type === \"partner_stroke\") {\r\n                const s = data.stroke;\r\n                drawStroke(ctx, s.x0, s.y0, s.x1, s.y1, s.color, s.size, s.eraser);\r\n            }\r\n\r\n            if (data.type === \"round2_start\") {\r\n                roundRef.current = 2;\r\n                setRound(2);\r\n                setSide(data.your_new_side);\r\n                sideRef.current = data.your_new_side;\r\n\r\n                // Replay partner's strokes from round 1\r\n                replayStrokes(data.partner_strokes, ctx);\r\n\r\n                // Redraw divider\r\n                ctx.strokeStyle = \"#ccc\";\r\n                ctx.lineWidth = 2;\r\n                ctx.setLineDash([8, 6]);\r\n                ctx.beginPath();\r\n                ctx.moveTo(HALF, 0);\r\n                ctx.lineTo(HALF, CANVAS_HEIGHT);\r\n                ctx.stroke();\r\n                ctx.setLineDash([]);\r\n\r\n                setPhase(\"playing\");\r\n                startTimer();\r\n            }\r\n\r\n            if (data.type === \"game_over\") {\r\n                setPhase(\"gameover\");\r\n                if (timerRef.current) clearInterval(timerRef.current);\r\n            }\r\n        };\r\n\r\n        ws.onclose = () => console.log(\"WebSocket closed\");\r\n\r\n        return () => {\r\n            ws.close();\r\n            if (timerRef.current) clearInterval(timerRef.current);\r\n        };\r\n    }, [code, playerId, drawStroke, replayStrokes, startTimer, HALF]);\r\n\r\n    const onMouseDown = (e) => {\r\n        if (phase !== \"playing\") return;\r\n        drawingRef.current = true;\r\n        const pos = getCanvasPos(e);\r\n        lastPosRef.current = { x: clampX(pos.x, sideRef.current), y: pos.y };\r\n    };\r\n\r\n    const onMouseMove = (e) => {\r\n        if (!drawingRef.current || phase !== \"playing\") return;\r\n        const ctx = ctxRef.current;\r\n        const pos = getCanvasPos(e);\r\n        const x1 = clampX(pos.x, sideRef.current);\r\n        const y1 = pos.y;\r\n        const { x: x0, y: y0 } = lastPosRef.current;\r\n\r\n        drawStroke(ctx, x0, y0, x1, y1, color, brushSize, tool === \"eraser\");\r\n\r\n        const strokeData = {\r\n            type: \"stroke\",\r\n            x0, y0, x1, y1,\r\n            color,\r\n            size: brushSize,\r\n            eraser: tool === \"eraser\",\r\n        };\r\n        wsRef.current?.send(JSON.stringify(strokeData));\r\n        lastPosRef.current = { x: x1, y: y1 };\r\n    };\r\n\r\n    const onMouseUp = () => { drawingRef.current = false; };\r\n\r\n    const colors = [\"#1a1a2e\", \"#e63946\", \"#457b9d\", \"#2d6a4f\", \"#f4a261\", \"#9b2226\", \"#6d6875\", \"#ffffff\"];\r\n\r\n    const sideLabel = side === \"left\" ? \"‚óÄ LEFT HALF\" : \"‚ñ∂ RIGHT HALF\";\r\n    const roundLabel = round === 1 ? \"ROUND 1 ‚Äî Draw your half\" : \"ROUND 2 ‚Äî Complete your partner's canvas\";\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: \"100vh\",\r\n            background: \"linear-gradient(135deg, #0f0c29, #302b63, #24243e)\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            padding: \"20px\",\r\n            fontFamily: \"'Courier New', monospace\",\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                width: \"100%\",\r\n                maxWidth: CANVAS_WIDTH,\r\n                marginBottom: \"12px\",\r\n            }}>\r\n                <div style={{ color: \"#a89bc2\", fontSize: \"0.9rem\", letterSpacing: \"0.15em\" }}>\r\n                    {phase === \"waiting\" ? \"‚è≥ WAITING FOR PLAYER 2...\" : sideLabel}\r\n                </div>\r\n                <div style={{ color: \"#f0e6d3\", fontSize: \"1rem\", letterSpacing: \"0.1em\", textAlign: \"center\" }}>\r\n                    üé® <strong>{prompt || \"...\"}</strong>\r\n                </div>\r\n                <div style={{ color: \"#a89bc2\", fontSize: \"0.9rem\", letterSpacing: \"0.15em\" }}>\r\n                    {phase === \"playing\" ? roundLabel.split(\"‚Äî\")[0] : \"\"}\r\n                </div>\r\n            </div>\r\n\r\n            {phase === \"playing\" && (\r\n                <Timer seconds={timeLeft} label={`ROUND ${round}`} />\r\n            )}\r\n\r\n            {phase === \"transition\" && (\r\n                <div style={{ color: \"#f0e6d3\", fontSize: \"1.5rem\", marginBottom: \"12px\", letterSpacing: \"0.1em\" }}>\r\n                    ‚è≥ Waiting for round 2...\r\n                </div>\r\n            )}\r\n\r\n            {phase === \"gameover\" && (\r\n                <div style={{ color: \"#f4a261\", fontSize: \"2rem\", marginBottom: \"12px\", letterSpacing: \"0.1em\" }}>\r\n                    üéâ GAME OVER ‚Äî Here's the final canvas!\r\n                </div>\r\n            )}\r\n\r\n            {/* Round label */}\r\n            {phase === \"playing\" && (\r\n                <div style={{ color: \"#a89bc2\", fontSize: \"0.8rem\", letterSpacing: \"0.2em\", marginBottom: \"8px\" }}>\r\n                    {roundLabel}\r\n                </div>\r\n            )}\r\n\r\n            {/* Canvas */}\r\n            <div style={{ position: \"relative\", boxShadow: \"0 0 60px #00000088\" }}>\r\n                <canvas\r\n                    ref={canvasRef}\r\n                    width={CANVAS_WIDTH}\r\n                    height={CANVAS_HEIGHT}\r\n                    style={{\r\n                        display: \"block\",\r\n                        maxWidth: \"100%\",\r\n                        cursor: phase === \"playing\" ? (tool === \"eraser\" ? \"cell\" : \"crosshair\") : \"default\",\r\n                        borderRadius: \"4px\",\r\n                        border: \"2px solid #302b63\",\r\n                    }}\r\n                    onMouseDown={onMouseDown}\r\n                    onMouseMove={onMouseMove}\r\n                    onMouseUp={onMouseUp}\r\n                    onMouseLeave={onMouseUp}\r\n                />\r\n                {/* Side overlay hint */}\r\n                {phase === \"playing\" && (\r\n                    <div style={{\r\n                        position: \"absolute\",\r\n                        top: 8,\r\n                        left: side === \"left\" ? 8 : HALF + 8,\r\n                        background: \"#302b6388\",\r\n                        color: \"#f0e6d3\",\r\n                        padding: \"4px 10px\",\r\n                        borderRadius: \"4px\",\r\n                        fontSize: \"0.75rem\",\r\n                        letterSpacing: \"0.1em\",\r\n                        pointerEvents: \"none\",\r\n                    }}>\r\n                        YOUR ZONE\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Toolbar */}\r\n            {phase === \"playing\" && (\r\n                <div style={{\r\n                    display: \"flex\",\r\n                    gap: \"12px\",\r\n                    alignItems: \"center\",\r\n                    marginTop: \"16px\",\r\n                    background: \"#1a1a3e\",\r\n                    padding: \"12px 20px\",\r\n                    borderRadius: \"50px\",\r\n                    boxShadow: \"0 4px 20px #00000066\",\r\n                }}>\r\n                    {colors.map(c => (\r\n                        <div\r\n                            key={c}\r\n                            onClick={() => { setColor(c); setTool(\"pen\"); }}\r\n                            style={{\r\n                                width: 28,\r\n                                height: 28,\r\n                                borderRadius: \"50%\",\r\n                                background: c,\r\n                                cursor: \"pointer\",\r\n                                border: color === c && tool === \"pen\" ? \"3px solid #f0e6d3\" : \"3px solid transparent\",\r\n                                boxShadow: c === \"#ffffff\" ? \"0 0 0 1px #666 inset\" : \"none\",\r\n                                transition: \"transform 0.1s\",\r\n                                transform: color === c && tool === \"pen\" ? \"scale(1.2)\" : \"scale(1)\",\r\n                            }}\r\n                        />\r\n                    ))}\r\n                    <div style={{ width: 1, height: 28, background: \"#ffffff22\" }} />\r\n                    <button\r\n                        onClick={() => setTool(tool === \"eraser\" ? \"pen\" : \"eraser\")}\r\n                        style={{\r\n                            background: tool === \"eraser\" ? \"#f0e6d3\" : \"transparent\",\r\n                            color: tool === \"eraser\" ? \"#1a1a2e\" : \"#f0e6d3\",\r\n                            border: \"2px solid #f0e6d344\",\r\n                            borderRadius: \"20px\",\r\n                            padding: \"4px 14px\",\r\n                            cursor: \"pointer\",\r\n                            fontFamily: \"inherit\",\r\n                            fontSize: \"0.8rem\",\r\n                            letterSpacing: \"0.1em\",\r\n                        }}\r\n                    >\r\n                        ERASER\r\n                    </button>\r\n                    <input\r\n                        type=\"range\"\r\n                        min={2}\r\n                        max={24}\r\n                        value={brushSize}\r\n                        onChange={e => setBrushSize(Number(e.target.value))}\r\n                        style={{ width: 80, accentColor: \"#a89bc2\" }}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}